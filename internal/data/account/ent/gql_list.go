// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"

	"github.com/99designs/gqlgen/graphql"
	"golang.org/x/exp/slices"
)

type customCollectFieldsArgs struct {
	path   []string
	fields []string
}

type CustomCollectFieldsOption func(args *customCollectFieldsArgs)

func WithPath(path ...string) CustomCollectFieldsOption {
	return func(args *customCollectFieldsArgs) {
		args.path = path
	}
}

func WithFields(fields ...string) CustomCollectFieldsOption {
	return func(args *customCollectFieldsArgs) {
		args.fields = fields
	}
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *MembershipQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*MembershipQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *MembershipQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*Membership, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *MembershipQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*Membership, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// MembershipList is the list to Membership.
type MembershipList struct {
	Nodes      []*Membership `json:"nodes"`
	TotalCount int           `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*Membership.
func (__m *MembershipQuery) List(ctx context.Context, offset, limit int, opts ...MembershipPaginateOption) (*MembershipList, error) {
	pager, err := newMembershipPager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &MembershipList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *OAuthAccountQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*OAuthAccountQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *OAuthAccountQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*OAuthAccount, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *OAuthAccountQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*OAuthAccount, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// OAuthAccountList is the list to OAuthAccount.
type OAuthAccountList struct {
	Nodes      []*OAuthAccount `json:"nodes"`
	TotalCount int             `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*OAuthAccount.
func (__m *OAuthAccountQuery) List(ctx context.Context, offset, limit int, opts ...OAuthAccountPaginateOption) (*OAuthAccountList, error) {
	pager, err := newOAuthAccountPager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &OAuthAccountList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *OAuthProviderQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*OAuthProviderQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *OAuthProviderQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*OAuthProvider, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *OAuthProviderQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*OAuthProvider, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// OAuthProviderList is the list to OAuthProvider.
type OAuthProviderList struct {
	Nodes      []*OAuthProvider `json:"nodes"`
	TotalCount int              `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*OAuthProvider.
func (__m *OAuthProviderQuery) List(ctx context.Context, offset, limit int, opts ...OAuthProviderPaginateOption) (*OAuthProviderList, error) {
	pager, err := newOAuthProviderPager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &OAuthProviderList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *OrganizationQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*OrganizationQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *OrganizationQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*Organization, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *OrganizationQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*Organization, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// OrganizationList is the list to Organization.
type OrganizationList struct {
	Nodes      []*Organization `json:"nodes"`
	TotalCount int             `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*Organization.
func (__m *OrganizationQuery) List(ctx context.Context, offset, limit int, opts ...OrganizationPaginateOption) (*OrganizationList, error) {
	pager, err := newOrganizationPager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &OrganizationList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *PermissionQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*PermissionQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *PermissionQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*Permission, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *PermissionQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*Permission, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// PermissionList is the list to Permission.
type PermissionList struct {
	Nodes      []*Permission `json:"nodes"`
	TotalCount int           `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*Permission.
func (__m *PermissionQuery) List(ctx context.Context, offset, limit int, opts ...PermissionPaginateOption) (*PermissionList, error) {
	pager, err := newPermissionPager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &PermissionList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *TenantQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*TenantQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *TenantQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*Tenant, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *TenantQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*Tenant, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// TenantList is the list to Tenant.
type TenantList struct {
	Nodes      []*Tenant `json:"nodes"`
	TotalCount int       `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*Tenant.
func (__m *TenantQuery) List(ctx context.Context, offset, limit int, opts ...TenantPaginateOption) (*TenantList, error) {
	pager, err := newTenantPager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &TenantList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *TenantRoleQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*TenantRoleQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *TenantRoleQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*TenantRole, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *TenantRoleQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*TenantRole, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// TenantRoleList is the list to TenantRole.
type TenantRoleList struct {
	Nodes      []*TenantRole `json:"nodes"`
	TotalCount int           `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*TenantRole.
func (__m *TenantRoleQuery) List(ctx context.Context, offset, limit int, opts ...TenantRolePaginateOption) (*TenantRoleList, error) {
	pager, err := newTenantRolePager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &TenantRoleList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *TenantUserQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*TenantUserQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *TenantUserQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*TenantUser, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *TenantUserQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*TenantUser, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// TenantUserList is the list to TenantUser.
type TenantUserList struct {
	Nodes      []*TenantUser `json:"nodes"`
	TotalCount int           `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*TenantUser.
func (__m *TenantUserQuery) List(ctx context.Context, offset, limit int, opts ...TenantUserPaginateOption) (*TenantUserList, error) {
	pager, err := newTenantUserPager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &TenantUserList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}

// CollectFields tells the query-builder to eagerly load connected nodes by resolver context.
func (__m *UserQuery) CustomCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*UserQuery, error) {
	args := customCollectFieldsArgs{}
	for _, opt := range opts {
		opt(&args)
	}
	fc := graphql.GetFieldContext(ctx)
	if fc == nil {
		return __m, nil
	}
	if field := collectedField(ctx, args.path...); field != nil {
		if err := __m.collectField(ctx, true, graphql.GetOperationContext(ctx), *field, args.path); err != nil {
			return nil, err
		}
	}
	if len(args.fields) > 0 && len(__m.ctx.Fields) > 0 {
		for _, field := range args.fields {
			if !slices.Contains(__m.ctx.Fields, field) {
				__m.ctx.Fields = append(__m.ctx.Fields, field)
			}
		}
	}
	return __m, nil
}

// AllCollectFields
func (__m *UserQuery) AllCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) ([]*User, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.All(ctx)
}

// FirstCollectFields
func (__m *UserQuery) FirstCollectFields(ctx context.Context, opts ...CustomCollectFieldsOption) (*User, error) {
	query, err := __m.CustomCollectFields(ctx, opts...)
	if err != nil {
		return nil, err
	}
	return query.First(ctx)
}

// UserList is the list to User.
type UserList struct {
	Nodes      []*User `json:"nodes"`
	TotalCount int     `json:"totalCount"`
}

// List executes the query and returns totalCount and nodes []*User.
func (__m *UserQuery) List(ctx context.Context, offset, limit int, opts ...UserPaginateOption) (*UserList, error) {
	pager, err := newUserPager(opts, false)
	if err != nil {
		return nil, err
	}
	if _, err = pager.applyFilter(__m); err != nil {
		return nil, err
	}
	conn := &UserList{}
	ignoredNodes := !hasCollectedField(ctx, nodesField)
	if hasCollectedField(ctx, totalCountField) {
		hasPagination := limit != 0
		if hasPagination || ignoredNodes {
			c := __m.Clone()
			c.ctx.Fields = nil
			if conn.TotalCount, err = c.Count(ctx); err != nil {
				return nil, err
			}
		}
	}
	if ignoredNodes || (limit == 0) {
		return conn, nil
	}
	__m.Offset(offset).Limit(limit)
	if field := collectedField(ctx, nodesField); field != nil {
		if err = __m.collectField(ctx, limit == 1, graphql.GetOperationContext(ctx), *field, []string{nodesField}); err != nil {
			return nil, err
		}
	}
	conn.Nodes, err = pager.applyOrder(__m).All(ctx)
	if err != nil {
		return nil, err
	}
	return conn, nil
}
